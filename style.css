:root{
  --bg:#f7f7f9;
  --card:#ffffff;
  --primary:#2f7d65;
  --primary-600:#26664f;
  --accent:#eab308;
  --muted:#6b7280;
  --border:#e6e8ea;
  --glass: rgba(255,255,255,0.6);
}

/* page layout safe */
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,sans-serif;
  background:linear-gradient(180deg, #fbfbfc 0%, var(--bg) 100%);
  color:#0f1720;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  overflow-x:hidden; /* evita scroll orizzontale */
}

/* TOPBAR */
.topbar{
  position:sticky;
  top:0;
  background:rgba(255,255,255,0.9);
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:1rem 1.5rem;
  border-bottom:1px solid var(--border);
  backdrop-filter: blur(6px);
  z-index:40;
  box-shadow: 0 6px 20px rgba(16,24,40,0.05);
}

.logo{
  font-family:Playfair Display,serif;
  font-size:1.4rem;
  color:var(--primary-600);
}

/* NAV TABS */
nav{ /* keep relative for indicator */
  display:flex;
  align-items:center;
}

.nav-tabs{
  display:flex;
  gap:0.6rem;
  padding:6px;
  background:linear-gradient(180deg, rgba(47,125,101,0.04), transparent);
  border-radius:999px;
  align-items:center;
  position:relative;
}

nav button{
  background:none;
  border:none;
  padding:.5rem .9rem;
  font-weight:600;
  cursor:pointer;
  color:var(--muted);
  border-radius:999px;
  transition: all .22s ease;
  min-width:72px;
  text-align:center;
  font-size:0.95rem;
}
nav button:hover{ color:var(--primary) }
nav button.active{
  color:white;
  font-weight:700;
  background:linear-gradient(90deg,var(--primary),#4f977f);
  box-shadow: 0 6px 18px rgba(47,125,101,0.14);
}

/* indicator used for subtle underline when not using full pill active style */
nav .indicator{
  position:absolute;
  bottom:4px;
  height:3px;
  background:var(--primary);
  border-radius:2px;
  transition:transform .25s cubic-bezier(.2,.9,.3,1), width .25s;
  pointer-events:none;
  width:0; /* set by JS */
}

/* LAYOUT */
main{
  max-width:1200px;
  margin:auto;
  padding:2rem 1rem;
  width:100%;
  flex:1;
  overflow:hidden; /* evita scroll globale; i card interni scrollano se necessario */
}

.page{display:none; height:100%;}
.page.active{display:block}

/* card area */
.card{
  background:var(--card);
  padding:1.5rem;
  border-radius:1rem;
  box-shadow:0 14px 30px rgba(12,18,21,.06);
  max-height: calc(100vh - 240px);
  overflow:auto; /* contenuto interno scrollabile se serve, evita scroll dell'intera pagina */
}

/* FORM */
label{
  font-size:.7rem;
  text-transform:uppercase;
  color:var(--muted);
}

input,select{
  width:100%;
  padding:.7rem;
  margin:.4rem 0 1rem;
  border-radius:.6rem;
  border:1px solid var(--border);
  background:transparent;
  transition:border-color .18s, box-shadow .18s;
}

input:focus,select:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 4px 18px rgba(47,125,101,0.06);
}

/* grid responsive */
.grid{
  display:grid;
  gap:1rem;
}
@media(min-width:768px){
  .grid{grid-template-columns:repeat(4,1fr)}
}

/* primary button */
.primary{
  width:100%;
  padding:0.95rem;
  border:none;
  border-radius:.75rem;
  background:linear-gradient(135deg,var(--primary),#5f8f78);
  color:#fff;
  font-weight:700;
  cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease;
}
.primary:hover{ transform:translateY(-2px); box-shadow:0 10px 30px rgba(47,125,101,0.12) }

/* TABLE */
table{
  width:100%;
  border-collapse:collapse;
  margin-top:0.25rem;
}

th,td{
  padding:.9rem .7rem;
  border-bottom:1px solid var(--border);
  font-size:0.95rem;
}

th{
  text-transform:uppercase;
  font-size:.72rem;
  background:linear-gradient(180deg,#fbfbfb,#f7f6f3);
  letter-spacing:0.02em;
}

/* FILTRI */
.filters{
  display:grid;
  gap:0.75rem;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  margin-bottom:1.2rem;
}

/* PAGINATION */
.pagination{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:1rem;
  margin-top:1rem;
}

.pagination button{
  border:none;
  background:var(--primary);
  color:#fff;
  padding:.5rem .9rem;
  border-radius:.5rem;
  cursor:pointer;
  transition:transform .12s;
}
.pagination button:active{ transform:translateY(1px) }

/* FOOTER */
footer{
  text-align:center;
  padding:1.5rem;
  color:var(--muted);
  background:transparent;
}

/* TOAST */
#toast{
  position:fixed;
  bottom:24px;
  right:24px;
  background:#111;
  color:#fff;
  padding:1rem 1.5rem;
  border-radius:.8rem;
  opacity:0;
  transform:translateY(12px);
  transition:.25s;
  z-index:60;
}
#toast.show{opacity:1;transform:none}

/* hidden helper */
.hidden{display:none}

/* fixed-select: styling for selects we expect to be long lists */
.fixed-select{
  position:relative;
  -webkit-appearance:none;
  -moz-appearance:none;
  appearance:none;
  background:linear-gradient(180deg, #fff, #fbfbfb);
  padding-right:2.6rem;
}

/* custom arrow for selects */
.fixed-select{
  background-image: linear-gradient(45deg, transparent 50%, var(--muted) 50%),
                    linear-gradient(135deg, var(--muted) 50%, transparent 50%);
  background-position: calc(100% - 14px) calc(1.15rem), calc(100% - 9px) calc(1.15rem);
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}

/* try to limit dropdown height where browser supports it.
   Note: native dropdown rendering depends on browser; this is best-effort */
.fixed-select{
  max-width:100%;
  /* if browser allows, dropdown will be constrained */
  max-height: 220px;
  overflow-y: auto;
}

/* small screens adjustments */
@media(max-width:600px){
  .grid{grid-template-columns:repeat(2,1fr)}
  nav button{min-width:64px; padding:.45rem .6rem}
  .card{padding:1rem}
}

/* chart wrapper to avoid layout jump */
.chart-wrap{
  height:260px;
  position:relative;
}

/* subtle row hover */
tbody tr:hover{ background: linear-gradient(90deg, rgba(47,125,101,0.03), transparent) }
